<div class="perfil-wrapper">
  
  <!-- ENCABEZADO -->
  <section class="perfil-header">
    <div class="perfil-info">
      <img [src]="perfil || '/assets/img/default.png'" alt="Foto de perfil" class="perfil-avatar" />
      <div>
        <h2>{{ nombre }} {{ apellido }}</h2>
        <p>@{{ username }}</p>
        <span class="rol-badge">{{ rol }} ðŸŒ¿</span>
      </div>
    </div>

    <div class="perfil-actions">
      <button class="btn-primary" (click)="editarPerfil()">Editar perfil</button>
      <button class="btn-outline" (click)="cerrarSesion()">Cerrar sesiÃ³n</button>
    </div>
  </section>

  <!-- DATOS PERSONALES -->
  <section class="perfil-details">
    <h3 class="section-title">Datos personales</h3>
    <div class="detail-grid">
      <div class="detail-item">
        <label>Nombre completo</label>
        <p>{{ nombre }} {{ apellido }}</p>
      </div>
      <div class="detail-item">
        <label>Correo electrÃ³nico</label>
        <p>{{ email }}</p>
      </div>
      <div class="detail-item">
        <label>Celular</label>
        <p>{{ celular }}</p>
      </div>
      <div class="detail-item">
        <label>Rol</label>
        <p>{{ rol }}</p>
      </div>
      <div class="detail-item">
        <label>Estado</label>
        <p>{{ estado }}</p>
      </div>
      <div class="detail-item">
        <label>Fecha de registro</label>
        <p>{{ fechaRegistro }}</p>
      </div>
    </div>
  </section>

  <!-- POSICIÃ“N EN EL RANKING -->
  <section class="perfil-ranking">
    <h3 class="section-title">Tu posiciÃ³n en el ranking</h3>
    <div class="ranking-container">
      <div class="ranking-info">
        <p class="ranking-position">#{{ posicionRanking }} <span>de {{ totalUsuarios }} usuarios</span></p>
        <h4>{{ puntos }} puntos acumulados</h4>
        <div class="progress-bar">
          <div class="progress" [style.width.%]="porcentajeRanking"></div>
        </div>
      </div>
      <div class="ranking-icon">
        <i class="fa-solid fa-trophy"></i>
      </div>
    </div>
  </section>

  <!-- HISTORIAL DE ENTREGAS -->
  <section class="perfil-history">
    <h3 class="section-title">Historial de entregas recientes</h3>
    <div class="history-grid">
      <div class="history-card" *ngFor="let entrega of entregas">
        <div class="history-header">
          <i class="fa-solid fa-recycle"></i>
          <span>{{ entrega.fecha }}</span>
        </div>
        <p><strong>{{ entrega.material }}</strong> - {{ entrega.peso }} kg</p>
        <p class="points">+{{ entrega.puntos }} pts</p>
      </div>
    </div>
  </section>

</div>
